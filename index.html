<!DOCTYPE html>
<html>
  <head>
    <title>My Resume</title>
    <link rel="stylesheet" href="loading.css">
    <link rel="stylesheet" href="index.css">
    <script src="//at.alicdn.com/t/font_1098191_pw385qmai8r.js"></script>
  </head>
  <body>
    <div id="welcome" class="welcome active">
      <div class="loading"></div>
    </div>
    <div id="topNavBar" class="topNavBar">
      <div class="topNavBar-inner clearfix">
          <a class="logo" href="#" alt="logo" style="float:left;">
              <span class="rs">RS</span><span class="card">card</span><!--两个span元素中间如果有换行，显示时浏览器会自动加一个空格在两元素中间-->
            </a>
            <nav class="navbar" style="float: right;">
              <ul class="clearfix">
                <li><a href="#siteAbout">ABOUT</a></li>
                <li><a href="#siteSkills">SKILLS</a></li>
                <li><a href="#siteExperience">EXPERIENCE</a></li>
                <li>
                  <a href="#siteBlog">BLOG</a>
                  <ul class="submenu">
                    <li>ZhiHu</li>
                    <li>GitHub</li>
                  </ul>
                </li>
                <li>
                  <a href="#siteAlldemos">ALL DEMOS</a>
                  <ul class="submenu">
                    <li>Demo 1</li>
                    <li>Demo 2</li>
                    <li>Demo 3</li>
                  </ul>
                </li>
                <li><a href="#siteContact">CONTACT</a></li>
                <li><a href="#siteOther">OTHER</a></li>
              </ul>
            </nav>
      </div>
    </div>
    <div class="banner">
      <div class="mask"></div>
    </div>
    <main>
      <div scrollTitle id="siteAbout" class="userCard">
          <div class="pictureAndText clearfix">
            <div class="picture">
              <img src="./img/selfie.JPEG" width="299" height="299" alt="Profile Photo">
            </div>
            <div class="profile">
                <span class="greeting">Hello
                  <span class="triangle"></span>
                </span>
                <h1>Weijing Zeng</h1>
                <p>Front-end Web Developer</p>
                <hr>
                <dl>
                  <dt>AGE</dt>
                  <dd>20</dd>
                  <dt>ADDRESS</dt>
                  <dd>Guiyang</dd>
                  <dt>EMAIL</dt>
                  <dd>zwjandhh@gmail.com</dd>
                  <dt>PHONE</dt>
                  <dd>***-***-****</dd>
                </dl>
            </div>
          </div>
            <footer class="social-media">
              <a href="#">
                  <svg class="icon" aria-hidden="true">
                      <use xlink:href="#icon-github"></use>
                  </svg>
              </a>
              <a href="#">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-weibo"></use>
                </svg>
              </a>  
              <a href="#">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-zhihu0"></use>
                </svg>
              </a> 
              <a href="#">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-mianshulogo"></use>
                </svg>
              </a>  
              <a href="#">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-i-wechat"></use>
                </svg>
              </a>     
            </footer>
        </div>
      <p class="downloadButton-wrapper">
          <a class="downloadButton" href="./Weijing Zeng_Front-end web developer.pdf" target="_blank" download>Download Resume</a>
      </p>
      <p class="introduction">I am a newly graduated student who is passionate about web development and want to grow in this industry eagerly. When I was at school, I concentrated on web development that focuses on front-end and back-end. I familiar with HTML, CSS, JavaScript, MySQL, MongoDB, and Java as well. 
      </p>
    </main>
    <section scrollTitle id="siteSkills" class="skills">
      <h2>Professional Skills</h2>
      <ol class="skillCard clearfix">
        <li>
          <h3>HTML5 & CSS3</h3>
          <div class="progressBar">
            <div class="progress" style="width: 85%"></div>
          </div>
        </li>
        <li>
            <h3>Javascript</h3>
            <div class="progressBar">
              <div class="progress" style="width: 70%"></div>
            </div>
        </li>
        <li>
            <h3>jQuery</h3>
            <div class="progressBar">
              <div class="progress" style="width: 70%"></div>
            </div>
        </li>
        <li>
            <h3>Vue</h3>
            <div class="progressBar">
              <div class="progress" style="width: 40%"></div>
            </div>
        </li>
        <li>
            <h3>React</h3>
            <div class="progressBar">
              <div class="progress" style="width: 60%"></div>
            </div>
        </li>
        <li>
            <h3>Node.js</h3>
            <div class="progressBar">
              <div class="progress" style="width: 80%"></div>
            </div>
        </li>    
      </ol>
    </section>
    <section scrollTitle id="siteAlldemos" class="portfolio">
      <h2>Portfolio</h2>
      <nav>
        <ol class="portfolioCard clearfix">
          <li id="portfolioAll">All</li>
          <li id="portfolioFrame">Framework</li>
          <li id="portfolioVanilla">Vanilla JS</li>
        </ol>
        <div id="portfolioBar" class="bar status-1">
          <div class="barSwitch"></div>
        </div>
      </nav>
      <script>
        portfolioAll.onclick = function(){
          portfolioBar.className = 'bar status-1'
        }
        portfolioFrame.onclick = function(){
          portfolioBar.className = 'bar status-2'
        }
        portfolioVanilla.onclick = function(){
          portfolioBar.className = 'bar status-3'
        }
      </script>
      <div class="works" style="height: 597px;">
        <div class="big" style="top: 0; left: 0;">
          <img src="./img/img2.JPEG" width="597" height="597" alt="DemoPic1">
        </div>
        <div class="small" style="top: 0; left: 645px;">
          <img src="./img/img3.JPEG" width="293" height="293" alt="DemoPic2">
        </div>
        <div class="small" style="top: 304px; left: 645px;">
          <img src="./img/img1.JPEG" width="293" height="293" alt="DemoPic3">
        </div>
      </div>
    </section>
    <script>
      // 加载到这里就消除welcome的active
      setTimeout(function(){
        welcome.classList.remove('active')
      },1000)
      
      let specialTags = document.querySelectorAll('[scrollTitle]')
      let minIndex = 0
      function findMinIndex(){
        for(let i = 0; i < specialTags.length; i++){
          if(Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minIndex].offsetTop - window.scrollY))
            minIndex = i    
        }
      }
      //让目标元素向下偏移，以制造出滚动到目标位置时元素向上弹出的效果
      for(let i = 0; i < specialTags.length; i++){
        specialTags[i].classList.add('offset')
      }
      setTimeout(function(){
        specialTags[minIndex].classList.remove('offset')
      },1000)
      
      window.onscroll = function(){
        // 当滚动高度不为0时，navbar浮起
        // window.scrollY是获取已经滚动过的高度
        window.scrollY > 0 ? topNavBar.classList.add('floating') : topNavBar.classList.remove('floating')
        
        findMinIndex()
        specialTags[minIndex].classList.remove('offset')
        //滚动到目标元素后，nav对应标题自动高亮
        let id = specialTags[minIndex].id
        let a = document.querySelector('[href="#'+id+'"]')
        let li = a.parentNode
        let siblingAndme = li.parentNode.children
        for(let i = 0; i < siblingAndme.length; i++){
          siblingAndme[i].classList.remove('highlight')
        }
        li.classList.add('highlight')
      }

      let liTags = document.querySelectorAll('nav.navbar > ul > li')
      for(let i = 0; i < liTags.length; i++){
        //移进
        liTags[i].onmouseenter = function(target){
          target.currentTarget.classList.add('active')
        }
        //移出
        liTags[i].onmouseleave = function(target){
          target.currentTarget.classList.remove('active')
        }
      }
      //不确定里面的标签是什么的情况下用以下方法
      // for(let i = 0; i < navs.length; i++){
      //   navs[i].onmouseenter = function(target){
      //     let a = target.currentTarget //用currentTarget获取的比较准确（这时获取到的是menuTigger底下的a标签）
      //     let nextTag = a.nextSibling //获取a之后的元素
      //     //因为nextsibling可能会获取到两个标签间的换行符，所以我们需要判断一下是否获取到了我们想要的标签，否则就再继续向下找
      //     //nextTag.tagName返回的是大写字母，所以记得等号后要用大写
      //     while(nextTag.tagName !== 'UL'){
      //       nextTag = nextTag.nextSibling
      //     }
      //   }
      // }

      //因为有固定的navbar，所以直接用锚点实现跳转的话，目标部分的头部会被navbar挡住部分，因此需要自己定义跳转高度 
      let navs = document.querySelectorAll('nav.navbar > ul > li > a')
      for(let i = 0; i < navs.length; i++){
        navs[i].onclick = function(x){
          x.preventDefault() //禁止标签的默认动作（<a>标签的跳转动作）
          let a = x.currentTarget
          let href = a.getAttribute('href') //拿到<a>里的href
          let element = document.querySelector(href) //找到href对应的元素
          let top = element.offsetTop //获取该元素到顶部的固定高度
          //用setInterval()实现点击nav后慢慢滑动到目标元素
          let times = 25 //移动25次
          let duration = 500/times //多久动一次
          let currentTop = window.scrollY //点击nav时的当前页面高度
          let targetTop = top - 80 //需要跳转到的高度
          let distancePerTime = (targetTop - currentTop)/times
          let i = 0
          //间隔一段时间执行一次
          let move = setInterval(() => {
            if(i === times){
              window.clearInterval(move)
              return
            }
            i = i+1
            window.scrollTo(0, currentTop+distancePerTime*i)
          },duration)
        } 
      }
    </script>
</body>		
</html>
